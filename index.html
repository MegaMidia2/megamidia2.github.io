<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<title>Parcelamento – MegaMidia</title>

<style>
    body {
        font-family: "Segoe UI", Roboto, Arial, sans-serif;
        background: #f5f7f8;
        padding: 20px;
        margin: 0;
        color: #2f3a40;
    }

    .container {
        max-width: 840px;
        margin: auto;
        background: #ffffff;
        padding: 22px 26px;
        border-radius: 10px;
        box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    }

    .row { margin-bottom: 14px; }

    .row-flex {
        display: flex;
        align-items: center;
    }

    label {
        display: inline-block;
        width: 320px;
        font-weight: 600;
        color: #44545c;
    }

    input, select {
        width: 240px;
        padding: 9px 10px;
        border: 1.8px solid #9fbfc8;
        border-radius: 6px;
        font-size: 15px;
    }

    input[readonly] {
        background: #e6f5f3;
        border-color: #7fcac2;
        font-weight: 600;
    }

    .radio-group {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-left: 10px;
    }

    .radio-item {
        width: auto;
        display: flex;
        align-items: center;
        gap: 6px;
        font-weight: 600;
        color: #44545c;
        cursor: pointer;
    }

    .radio-item input[type="radio"] {
        width: auto;
        margin: 0;
        padding: 0;
        border: none;
        height: auto;
    }

    .section-title {
        margin-top: 28px;
        font-weight: 700;
        color: #5c7a86;
        border-bottom: 1px solid #e1e6e9;
        padding-bottom: 6px;
    }

    .parcelas-lista {
        margin-top: 16px;
        max-height: 260px;
        overflow-y: auto;
        border-top: 1px solid #dde3e6;
        padding-top: 10px;
    }

    /* AJUSTE PARA CELULAR: Mantém seu layout original, apenas reduz as larguras fixas */
    @media (max-width: 768px) {
        .container { padding: 15px; }
        .row-flex { flex-wrap: wrap; } /* Permite que o rádio desça se não couber */
        
        label { 
            width: 100%; 
            margin-bottom: 5px; 
        }
        
        input, select { 
            width: 100%; 
            box-sizing: border-box; /* Garante que o padding não aumente a largura */
        }

        .radio-group { 
            margin-left: 0; 
            margin-top: 5px; 
        }
    }
</style>
</head>

<body>

<div class="container">

    <div class="row">
        <label>VALOR INICIAL:</label>
        <input type="text" id="valorInicial" value="1.000.000,00">
    </div>

    <div class="row">
        <label>ENTRADA:</label>
        <input type="text" id="entrada" value="0,00">
    </div>

    <div class="row">
        <label>RESTANTE:</label>
        <input type="text" id="restante" readonly>
    </div>

    <div class="row">
        <label>PARCELAS:</label>
        <input type="number" id="parcelas" value="10">
    </div>

    <div class="row">
        <label>PERÍODO ENTRE PARCELAS (MESES):</label>
        <select id="periodo">
            <option value="1">1 (Mensal)</option>
            <option value="2">2 (Bimestral)</option>
            <option value="3">3 (Trimestral)</option>
            <option value="4">4</option>
            <option value="6">6 (Semestral)</option>
            <option value="12">12 (Anual)</option>
        </select>
    </div>

    <div class="row row-flex">
        <label>PARCELAMENTO:</label>

        <div class="radio-group">
            <label class="radio-item">
                <input type="radio" name="tipo" value="price" checked>
                <span>PRICE</span>
            </label>

            <label class="radio-item">
                <input type="radio" name="tipo" value="sac">
                <span>SAC</span>
            </label>
        </div>
    </div>

    <div class="row">
        <label>IPCA (a.a.):</label>
        <input type="number" id="ipca" value="4.5" step="0.01">
    </div>

    <div class="row">
        <label>JUROS REAIS / RISCO (% a.a.):</label>
        <input type="number" id="jurosReais" value="2" step="0.01">
    </div>

    <div class="row section-title">
        PARCELAS DE:
        <input type="text" id="valorParcela" readonly>
    </div>

    <div class="row">
        <label>VALOR TOTAL RECEBIDO:</label>
        <input type="text" id="totalRecebido" readonly>
    </div>

    <div class="row">
        <label>PERDA SEM CORREÇÃO:</label>
        <input type="text" id="perdaSemCorrecao" readonly>
    </div>

    <div class="parcelas-lista" id="listaParcelas"></div>

</div>

<script>
// O seu script original permanece 100% igual
function formatBR(v) {
    return v.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
}

function parseBR(v) {
    return Number(String(v).replace(/\./g,'').replace(',','.')) || 0;
}

function taxaPorPeriodo(meses) {
    const ipca = (parseFloat(document.getElementById("ipca").value) || 0) / 100;
    const juros = (parseFloat(document.getElementById("jurosReais").value) || 0) / 100;
    const taxaAnual = ipca + juros;
    return Math.pow(1 + taxaAnual, meses / 12) - 1;
}

function calcular() {
    const valorInicial = parseBR(valorInicialInput.value);
    const entrada = parseBR(entradaInput.value);
    const n = parseInt(parcelasInput.value) || 1;
    const periodo = parseInt(periodoInput.value);

    const restante = valorInicial - entrada;
    restanteInput.value = formatBR(restante);

    listaParcelas.innerHTML = "";

    const tipo = document.querySelector('input[name="tipo"]:checked').value;
    const taxa = taxaPorPeriodo(periodo);

    let total = 0;

    if (tipo === "price") {
        const parcela = restante * (taxa * Math.pow(1 + taxa, n)) / (Math.pow(1 + taxa, n) - 1);
        valorParcelaInput.value = formatBR(parcela);

        for (let i = 1; i <= n; i++) {
            total += parcela;
            listaParcelas.innerHTML += `<div>Parcela ${i}: R$ ${formatBR(parcela)}</div>`;
        }
    } else {
        const amort = restante / n;
        let saldo = restante;
        valorParcelaInput.value = "Variável";

        for (let i = 1; i <= n; i++) {
            const juros = saldo * taxa;
            const parcela = amort + juros;
            saldo -= amort;
            total += parcela;
            listaParcelas.innerHTML += `<div>Parcela ${i}: R$ ${formatBR(parcela)}</div>`;
        }
    }

    totalRecebido.value = formatBR(total);
    perdaSemCorrecao.value = formatBR(total - restante);
}

const valorInicialInput = document.getElementById("valorInicial");
const entradaInput = document.getElementById("entrada");
const restanteInput = document.getElementById("restante");
const parcelasInput = document.getElementById("parcelas");
const periodoInput = document.getElementById("periodo");
const valorParcelaInput = document.getElementById("valorParcela");
const totalRecebido = document.getElementById("totalRecebido");
const perdaSemCorrecao = document.getElementById("perdaSemCorrecao");
const listaParcelas = document.getElementById("listaParcelas");

document.querySelectorAll("input, select").forEach(e => e.addEventListener("input", calcular));

calcular();
</script>

</body>
</html>
